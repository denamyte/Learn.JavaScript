<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <script src="../utils/utils.js"></script>
</head>

<body>

<section>
  <h1>Input two numbers and output their sum</h1>
  <button id="twoNumbersSum">Task</button>
  <br>
  <hr>
</section>

<section>
  <h1>The decimal part of a number</h1>
  <button id="decimalPart">Task</button>
  <br>
  <hr>
</section>

<section>
  <h1>Binet formula for the Fibonacci numbers</h1>
  <button id="binetFormula">Task</button>
  <br>
  <label for="fibSimpleResult">Fibonacci simple result</label>
  <br><input id="fibSimpleResult">
  <br>
  <label for="fibBinetResult">Fibonacci Binet result</label>
  <br><input id="fibBinetResult">
  <br>
  <label for="fibDiff">Fibonacci results difference</label>
  <br><input id="fibDiff">
  <br>
  <hr>
</section>


<script>

    document.getElementById("twoNumbersSum").onclick = function () {
        var first = inputUntilNumber("Input first number");
        var second = inputUntilNumber("Input second number");
        alert(first + second);
    };

    document.getElementById("decimalPart").onclick = function () {
        /** {number} */
        var number = Math.abs(inputUntilNumber("Input any number, preferably with a decimal part", 1.1));
        var str = number + "";
        var dotPosition = str.indexOf(".");
        var precision = dotPosition < 0 ? 0 : str.length - dotPosition - 1;
        alert((number - Math.floor(number)).toFixed(precision));
    };

    document.getElementById("binetFormula").onclick = function () {
        var number = inputUntilNumber("Input a number for the Fibonacci calculations");
        var fibSimpleValue = fibSimple(number);
        document.getElementById("fibSimpleResult").setAttribute("value", fibSimpleValue);
        var fibBinetValue = fibBinet(number);
        document.getElementById("fibBinetResult").setAttribute("value", fibBinetValue);
        document.getElementById("fibDiff").setAttribute("value", fibSimpleValue - fibBinetValue);
    };

    function fibSimple(n) {
        var a = 1,
            b = 0,
            x;
        for (i = 0; i < n; i++) {
            x = a + b;
            a = b;
            b = x;
        }
        return b;
    }

    function fibBinet(n) {
        var phi = (1 + Math.sqrt(5)) / 2;
        // alert(phi);
        return Math.round(Math.pow(phi, n) / Math.sqrt(5));
    }


</script>

</body>

</html>
